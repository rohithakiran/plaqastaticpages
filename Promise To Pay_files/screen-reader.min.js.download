/**
 * For Screen Reader
 * CA-11244
 *
 * JS mini: https://refresh-sf.com/
 */
var ScreenReader={invalidFieldFocusable:"invalid-field-focusable",invalidErrorInfoFocusable:"invalid-error-info-focusable",labels:{enter_label:enter_label||"Enter",enter_as_label:enter_as_label||"Enter as a",enter_as_currency:enter_as_currency||"Enter in currency format",enter_as_text:enter_as_text||"Enter as Text",required_label:required_label||"required",selected_option_label:selected_option_label||"Selected",siteDateFormat_label:date_format_label_prefix+": "+siteDateFormat_label.replace(/,/gi,"").split(/\s+/).join(", ")||"Date Format: Month, Day, Year",dropdown_list_count_label:dropdown_count_label||"There are {0} items in the list",dropdown_list_end_list_label:dropdown_count_endOfList||"End of list",page_title_screen_reader_suffix:page_title_screen_reader_suffix||""},isIE:-1<window.navigator.userAgent.indexOf("MSIE ")||-1<window.navigator.userAgent.indexOf("Trident/"),isWindows:-1<navigator.platform.indexOf("Win"),isMobileDevice:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent),append_lang_for_html:function(){var e=$("#mobLanguagePreference")[0]||$("#languagePreference")[0],t="en";e&&(t=$(e).val().split("_")[0]),$("html").attr("lang",t)},init_navigation_menu:function(){$(".menu_button_a").bind("click touchstart",function(){var a=$(this);setTimeout(function(){var e=a.next("div"),t=e.height();!t||t<=0?(t=48*e.find("a").length,$(".hotspot_menu li.active").removeClass("active").find("div.top_nav_target").removeClass("active").height(0),a.parent().addClass("active"),a.next("div").addClass("active")):(t=0,a.parent().removeClass("active")),e.css("height",t),e.trigger($.Event("heightchange"))},10)}),$(".menu_button_a").next("div").bind("heightchange",function(){var r=$(this);setTimeout(function(){var e,t,a=r.height();$(".hotspot_menu li:not(active)>a.menu_button_a").attr("aria-expanded",!1).removeAttr("aria-activedescendant").next("div").attr("aria-hidden",!0).find("div").attr("aria-hidden",!0),0<a?((t=(e=r.find("div")).attr("id"))||(t=r.attr("id")+"_menu_options",e.attr("id",t)),r.prev("a").attr("aria-expanded","true").attr("aria-activedescendant",t),r.removeAttr("aria-hidden"),e.removeAttr("aria-hidden").removeAttr("style"),r.parent().attr("expanded","true"),r.find("a").attr("tabindex",0)):(r.prev("a").attr("aria-expanded","false").removeAttr("aria-activedescendant"),r.attr("aria-hidden","true"),r.find("div").attr("aria-hidden","true"),r.parent().attr("expanded","false"),r.find("a").attr("tabindex",-1))},15)})},init_fields_accessibility:function(){var r=this;$("input").map(function(){var e,t=$(this),a=(t.val(),this.type.toLowerCase());"hidden"!==a&&"image"!==a&&"img"!==a&&("submit"===a||"cancel"===a||"button"===a?(e=t.val(),t.attr("role","button"),!t.attr("aria-label")&&e&&t.attr("aria-label",e),t.attr("disabled")&&t.attr("aria-disabled","true")):(t.attr("required")&&t.attr("aria-required","true"),t.attr("readonly")&&t.attr("aria-readonly","true"),t.attr("autocomplete")&&t.attr("aria-autocomplete","none"),t.attr("dateFormat")&&t.attr("title",r.labels.siteDateFormat_label)))})},init_radio_edit_field:function(){var s=this;$(".radio-edit-field").map(function(){var e=$(this),t=e.attr("item-id"),a=e.attr("item-meta"),r=$("#"+t);if(r){var i=r.attr("fieldtype").toLowerCase();try{var n,l=JSON.parse(a);for(var o in l){r.attr("aria-"+o,l[o]),"describedby"===o&&(n=0<$("#"+l[o]).text().trim().length,r.attr("aria-invalid",n),n?r.addClass(s.invalidFieldFocusable):r.removeClass(s.invalidFieldFocusable))}"date"===i&&(r.attr("placeholder",s.labels.siteDateFormat_label),r.attr("title",s.labels.siteDateFormat_label))}catch(e){console.error(e)}}})},init_field_by_label:function(){var s=this;$(".accessibility-input-by-label").map(function(){var e=$(this),t=e.attr("for").replace(/\./g,"\\."),a=e.attr("item-meta"),r=e.text().replace(s.labels.required_label,"").replace(":",""),i=$("#"+t);if(0<i.length)try{if(i.attr("placeholder",s.labels.enter_label+" "+r),i.attr("type")&&"text"==i.attr("type")&&(i.attr("autocomplete","off"),i.attr("aria-autocomplete","none")),a){var n,l=JSON.parse(a);for(var o in l){i.attr("aria-"+o,l[o]),"describedby"===o?(n=0<$("#"+l[o]).text().trim().length,i.attr("aria-invalid",n),n?i.addClass(s.invalidFieldFocusable):i.removeClass(s.invalidFieldFocusable)):"placeholder"===o&&i.attr("placeholder",l[o])}}}catch(e){console.error(e)}})},append_attribute_for_container:function(){$(".fa-asterisk").attr("aria-label",this.labels.required_label),$(".bg_success").attr("role","alert"),$(".bg_failure").attr("role","alert"),$("#header").attr("role","banner")},auto_skip_read:function(){$("div.column_fill").attr("aria-hidden","true"),$("div.clear").attr("aria-hidden","true"),$("select.countries").attr("aria-hidden","true"),$(".wf-check-group-spliter").attr("aria-hidden","true"),$("span.ddTitleText img").attr("aria-hidden","true"),$(".bg_success span.fa-action-icon").attr("aria-hidden","true"),$(".bg_failure span.fa-action-icon").attr("aria-hidden","true")},auto_focus_to_error_field_or_info:function(){var e,t=$($("."+this.invalidFieldFocusable)[0]),a=$($("."+this.invalidErrorInfoFocusable)[0]),r=this.isMobileDevice?19500:100;$(".bg_failure").parent().attr("aria-live","polite"),0<t.length?("div"===(e=t.prop("tagName").toLowerCase())?t.attr("tabindex",-1):t.attr("tabindex",0),setTimeout(function(){t.focus(),"div"!==e&&"span"===e||$("html, body").animate({scrollTop:t.offset().top},2*r)},r)):0<a.length&&a.text()&&(a.attr("tabindex",-1),setTimeout(function(){a.focus(),$("html, body").animate({scrollTop:a.offset().top},2*r)},r),setTimeout(function(){a.blur()},2.5*r))},init_workflow_form:function(){var p=this;$("#surveyAndTreatmentForm :input").map(function(){var e,t,a,r,i,n,l,o,s,d,c,_,u=$(this),b=u.attr("id")+"_error",h=this.type.toLowerCase(),f=p.invalidFieldFocusable;"radio"!==h&&"checkbox"!==h||(e=u.attr("data-own"),u=$("#"+e),b=e+"_error"),"hidden"!==h&&"image"!==h&&"img"!==h&&"submit"!==h&&"cancel"!==h&&"button"!==h&&(a="AQ"==(t=u.attr("aria-layout"))?u.attr("aria-describedby"):u.attr("aria-labelledby"),r=t&&"QAQ"==t?$("#"+a+"_after span.fa-asterisk"):$("#"+a+" span.fa-asterisk"),i=$("#"+b),n=r&&0<r.length,l=i&&0<i.length&&""!==i.text(),o=u.attr("data-type")||null,n&&u.attr("aria-required",n),u.attr("readonly")&&u.bind("keydown",function(e){if(13==(e.keyCode||e.which))return e.preventDefault(),!1}),u.attr("aria-invalid",l),l?(u.attr("aria-describedby",b),u.addClass(f)):u.removeClass(f),o&&(s=p.labels.enter_as_label+" "+o,"currency"===o.toLowerCase()?s=p.labels.enter_as_currency:"string"===o.toLowerCase()&&(s=p.labels.enter_as_text),d=u.attr("aria-layout"),p.isWindows&&!l&&("QAQ"==d?(_=(c=$("#"+u.attr("aria-describedby"))).html(),c.html('<abbr class="screen-reader-text">'+s+", </abbr>"+_),u.bind("focus",function(){u.removeAttr("placeholder")}),u.bind("blur",function(){u.attr("placeholder",s)})):"QA"==d&&u.attr("aria-placeholder",s)),u.attr("placeholder",s)))}),0<$("#surveyAndTreatmentForm").length&&$(".bg_failure").removeAttr("role")},init_select2_label:function(){function r(e,t){var a,r,i=e,n=i.text(),l=(i.attr("title"),t||$(i.closest(".select2-container").prev("select")[0])),o=l.attr("id")?l.attr("id").replace(/\./g,"\\."):l.attr("id"),s=l.attr("aria-label"),d=l.attr("aria-labelledby"),c=l.attr("aria-describedby"),_=o?$("label[for="+o+"]"):null,u=l.attr("aria-required"),b=l.attr("aria-invalid"),h=s;d?(h=(a=$("#"+d)).text().trim(),-1<a.html().indexOf('aria-label="required"')&&(h+=", "+f.labels.required_label)):!s&&_&&0<_.length&&(h=_.text()),h&&(i.removeAttr("title"),i.html('<abbr class="screen-reader-text">'+h+", </abbr>"+n)),(c||u||b)&&(r=i.parent(),c&&r.attr("aria-describedby",c),u&&r.attr("aria-required",u),b&&r.attr("aria-invalid",b))}var f=this;$("select").on("select2:select",function(e){var t=$(this),a=$(t.next(".select2").find(".select2-selection__rendered")[0]);r(a,t)}),$("select").on("select2:open",function(e){var t=$(this),a=$(t.next(".select2").find(".select2-selection")[0]),r=a.attr("aria-owns"),o=r?$("#"+r):null;o&&0<o.length&&(a.removeAttr("aria-owns"),setTimeout(function(){var e=o.find("li.select2-results__option[aria-selected=true]"),t=e.text();e.html(t+'<abbr class="screen-reader-text">, '+f.labels.selected_option_label+"</abbr>");var a,r,i=o.find("li"),n=$(i.get(0)),l=$(i.get(i.length-1));n&&0<n.length&&(t=n.html(),a=f.labels.dropdown_list_count_label.replace("{0}",i.length),n.html(t+'<abbr class="screen-reader-text">, '+a+"</abbr>")),l&&0<l.length&&(t=l.html(),r=f.labels.dropdown_list_end_list_label,l.html(t+'<abbr class="screen-reader-text">, '+r+"</abbr>"))},10))}),setTimeout(function(){$(".select2-selection__rendered").map(function(){var e=$(this),t=$(e.closest(".select2-container").prev("select")[0]);r(e,t)})},20)},init_tables:function(){this.isMobileDevice&&$(".no_more_tables thead tr").map(function(){$(this).attr("aria-hidden",!0)})},init_page_title:function(){var e,t;0<$(".page_title h1").contents().length&&(e=$($(".page_title h1").contents()[0]).text(),$($(".page_title h1").contents()[0]).wrap('<span aria-hidden="true"></span>').end(),0==$("#page_title_screen_reader").length&&(t='<span class="screen-reader-text" role="text" id="page_title_screen_reader">'+e+", "+this.labels.page_title_screen_reader_suffix+"</span>",$(".page_title h1").prepend(t)))},init_reader:function(){this.append_lang_for_html(),this.init_navigation_menu(),this.auto_skip_read(),this.append_attribute_for_container(),this.init_radio_edit_field(),this.init_fields_accessibility(),this.init_field_by_label(),this.init_workflow_form(),this.init_tables(),this.init_select2_label(),this.init_page_title(),this.auto_focus_to_error_field_or_info()}};$(document).ready(function(){ScreenReader.init_reader()});